# AirSec
Extracting spatiotemporal features from CSI and sound and obtaining potential candidates

# 声音处理

1. 若采集到声音过低，可采用音量增量20倍命令：

   ```bash
   ffmpeg -i temp.wav -filter:a "volume=20.0" temp_loud.wav
   ```

2. 运行`声音降噪.py` ：

   选取声音尾端中一段静音部分作为背景噪音对整段声音进行降噪。

3. 运行`声音处理.py` ：

   用滑动窗口方法计算短时能量，再用 `K-means` 聚类寻找击键声音发生点。

## `CSI ` 处理

1. 运行`预处理.py`

   ​        首先读取`CSI`数据，将空数据部分用其所在子载波的平均填充，然后截取前10s数据进行样条插值作为输入数据，再用巴特沃斯低通滤波器减少噪声扰动，最后选择使用`PCA`提取主成分或使用`MRC`算法最大信噪比。

2. 运行`分割击键.py`

   ​        首先对 `CSI` 数据和声音数据的绝对时间点进行对齐，使用滑动窗口方法计算 `CSI` 的能量或离散度，将高于阈值的部分定义为击键产生的波形，得到击键波形与击键间隔时间。

3. 运行`时空特征提取.py`

   ​        利用`DTW` 算法计算击键波形的距离矩阵，其中如若两次波形重叠则标记为粘合波形，再计算击键间隔时间的距离矩阵，根据阈值得到目标序列的空间特征与时间特征，其中时间特征按平均间隔时间从小到大排序序号12345，再根据空间特征粘合情况调整时间特征，保证粘合键间时间特征为1。

4. 运行`攻击猜测.py`

   ​        `存在粘合情况`与`不存在粘合情况`分别匹配可能序列。`不存在粘合情况`时，正常匹配时空特征列表寻找可能序列。`存在粘合情况`时，匹配空间特征时需要考虑粘合情况，首先匹配时间特征，寻找可能数字序列，再将粘合部分与非粘合部分分开，逐一计算非粘合部分空间特征是否匹配，同时粘合部分数字差小于等于1，二者同时符合才加入候选者列表。

## 其他

1. 时空特征列表制作：

   ​        调整你所需要的按键间距离与目标序列长度，运行 `table_maker.py` 生成表单。
